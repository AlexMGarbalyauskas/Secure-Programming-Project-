<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Your notes</title>
</head>
<body>
<h1>Your notes</h1>

<p><a href="/new_note">New note</a> | <a href="/logout">Logout</a></p>

<form method="GET" action="/search">
  <input name="q" placeholder="Search titlesâ€¦" value="{{ request.args.get('q', '') }}">
  <button type="submit">Search</button>
</form>

<ul>
  {% for note in notes %}
    <li>
      <a href="/view_note/{{ note.id }}">{{ note.title | e }}</a>
      <small>({{ note.created_at }})</small>
      <a href="/edit_note/{{ note.id }}">Edit</a>
      <form method="POST" action="/delete_note/{{ note.id }}" style="display:inline;">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
        <button type="submit">Delete</button>
      </form>
    </li>
  {% endfor %}
</ul>

{% with messages = get_flashed_messages() %}
  {% if messages %}
    <ul style="color:green;">
      {% for message in messages %}
        <li>{{ message }}</li>
      {% endfor %}
    </ul>
  {% endif %}
{% endwith %}
</body>
</html>
